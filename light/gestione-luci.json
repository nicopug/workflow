{
  "last_node_id": 50,
  "last_link_id": 85,
  "nodes": [
    {
      "id": 10,
      "type": "UnetLoaderGGUF",
      "pos": [20, 150],
      "size": {"0": 315, "1": 82},
      "flags": {},
      "order": 0,
      "mode": 0,
      "outputs": [{"name": "MODEL", "type": "MODEL", "links": [10], "shape": 3}],
      "widgets_values": ["flux1-dev-Q8_0.gguf"],
      "title": "1. Motore Flux (GGUF Q8)"
    },
    {
      "id": 11,
      "type": "DualCLIPLoader",
      "pos": [20, 300],
      "size": {"0": 315, "1": 106},
      "flags": {},
      "order": 1,
      "mode": 0,
      "outputs": [{"name": "CLIP", "type": "CLIP", "links": [11], "shape": 3}],
      "widgets_values": ["t5xxl_fp8_e4m3fn.safetensors", "clip_l.safetensors", "flux"],
      "title": "2. Caricamento CLIP"
    },
    {
      "id": 12,
      "type": "VAELoader",
      "pos": [20, 450],
      "size": {"0": 315, "1": 58},
      "flags": {},
      "order": 2,
      "mode": 0,
      "outputs": [{"name": "VAE", "type": "VAE", "links": [12, 60], "shape": 3}],
      "widgets_values": ["ae.safetensors"],
      "title": "3. Caricamento VAE"
    },
    {
      "id": 15,
      "type": "LoadImage",
      "pos": [400, 50],
      "size": {"0": 315, "1": 314},
      "flags": {},
      "order": 3,
      "mode": 0,
      "outputs": [{"name": "IMAGE", "type": "IMAGE", "links": [20], "shape": 3}],
      "widgets_values": ["soggetto_esempio.png", "image"],
      "title": "A. SOGGETTO (Input)"
    },
    {
      "id": 16,
      "type": "LoadImage",
      "pos": [400, 420],
      "size": {"0": 315, "1": 314},
      "flags": {},
      "order": 4,
      "mode": 0,
      "outputs": [{"name": "IMAGE", "type": "IMAGE", "links": [21], "shape": 3}],
      "widgets_values": ["light_map_esempio.png", "image"],
      "title": "B. RIFERIMENTO LUCE (Light Map)"
    },
    {
      "id": 20,
      "type": "LoadAndApplyICLightUnet",
      "pos": [800, 150],
      "size": {"0": 350, "1": 120},
      "flags": {},
      "order": 7,
      "mode": 0,
      "inputs": [
        {"name": "model", "type": "MODEL", "link": 10},
        {"name": "image", "type": "IMAGE", "link": 20},
        {"name": "light_image", "type": "IMAGE", "link": 21}
      ],
      "outputs": [{"name": "MODEL", "type": "MODEL", "links": [30], "shape": 3}],
      "widgets_values": ["ic-light-flux-test.safetensors"],
      "title": "4. Applicazione IC-Light Flux"
    },
    {
      "id": 25,
      "type": "CLIPTextEncode",
      "pos": [800, 350],
      "size": {"0": 400, "1": 180},
      "flags": {},
      "order": 5,
      "mode": 0,
      "inputs": [{"name": "clip", "type": "CLIP", "link": 11}],
      "outputs": [{"name": "CONDITIONING", "type": "CONDITIONING", "links": [31], "shape": 3}],
      "widgets_values": ["soft cinematic lighting, atmospheric, high quality, 4k, volumetric light from right side"],
      "title": "5. Prompt Luce (Descrivi l'atmosfera)"
    },
    {
      "id": 30,
      "type": "VAEEncode",
      "pos": [800, 600],
      "size": {"0": 210, "1": 46},
      "flags": {},
      "order": 6,
      "mode": 0,
      "inputs": [
        {"name": "pixels", "type": "IMAGE", "link": 20},
        {"name": "vae", "type": "VAE", "link": 12}
      ],
      "outputs": [{"name": "LATENT", "type": "LATENT", "links": [32], "shape": 3}],
      "title": "Encode Soggetto"
    },
    {
      "id": 35,
      "type": "BasicGuider",
      "pos": [1250, 150],
      "size": {"0": 250, "1": 46},
      "flags": {},
      "order": 8,
      "mode": 0,
      "inputs": [
        {"name": "model", "type": "MODEL", "link": 30},
        {"name": "conditioning", "type": "CONDITIONING", "link": 31}
      ],
      "outputs": [{"name": "GUIDER", "type": "GUIDER", "links": [40], "shape": 3}],
      "title": "Guider"
    },
    {
      "id": 36,
      "type": "KSamplerSelect",
      "pos": [1250, 250],
      "size": {"0": 315, "1": 58},
      "flags": {},
      "order": 9,
      "mode": 0,
      "outputs": [{"name": "SAMPLER", "type": "SAMPLER", "links": [41], "shape": 3}],
      "widgets_values": ["euler"],
      "title": "Sampler"
    },
    {
      "id": 37,
      "type": "BasicScheduler",
      "pos": [1250, 350],
      "size": {"0": 315, "1": 106},
      "flags": {},
      "order": 10,
      "mode": 0,
      "inputs": [{"name": "model", "type": "MODEL", "link": 30}],
      "outputs": [{"name": "SIGMAS", "type": "SIGMAS", "links": [42], "shape": 3}],
      "widgets_values": ["simple", 20, 1.0],
      "title": "Scheduler (20 steps)"
    },
    {
      "id": 40,
      "type": "SamplerCustomAdvanced",
      "pos": [1650, 150],
      "size": {"0": 355, "1": 126},
      "flags": {},
      "order": 11,
      "mode": 0,
      "inputs": [
        {"name": "noise", "type": "NOISE", "link": null},
        {"name": "guider", "type": "GUIDER", "link": 40},
        {"name": "sampler", "type": "SAMPLER", "link": 41},
        {"name": "sigmas", "type": "SIGMAS", "link": 42},
        {"name": "latent_image", "type": "LATENT", "link": 32}
      ],
      "outputs": [{"name": "output", "type": "LATENT", "links": [50], "shape": 3}],
      "title": "Generatore Luci"
    },
    {
      "id": 45,
      "type": "VAEDecode",
      "pos": [2050, 150],
      "size": {"0": 210, "1": 46},
      "flags": {},
      "order": 12,
      "mode": 0,
      "inputs": [
        {"name": "samples", "type": "LATENT", "link": 50},
        {"name": "vae", "type": "VAE", "link": 60}
      ],
      "outputs": [{"name": "IMAGE", "type": "IMAGE", "links": [70], "shape": 3}],
      "title": "Decodifica Finale"
    },
    {
      "id": 46,
      "type": "SaveImage",
      "pos": [2300, 150],
      "size": {"0": 315, "1": 270},
      "flags": {},
      "order": 13,
      "mode": 0,
      "inputs": [{"name": "images", "type": "IMAGE", "link": 70}],
      "widgets_values": ["Flux_ICLight_Result"],
      "title": "Salva Immagine Relighted"
    }
  ],
  "links": [
    [10, 10, 0, 20, 0, "MODEL"],
    [11, 11, 0, 25, 0, "CLIP"],
    [12, 12, 0, 30, 1, "VAE"],
    [20, 15, 0, 20, 1, "IMAGE"],
    [21, 16, 0, 20, 2, "IMAGE"],
    [30, 20, 0, 35, 0, "MODEL"],
    [31, 25, 0, 35, 1, "CONDITIONING"],
    [32, 30, 0, 40, 4, "LATENT"],
    [40, 35, 0, 40, 1, "GUIDER"],
    [41, 36, 0, 40, 2, "SAMPLER"],
    [42, 37, 0, 40, 3, "SIGMAS"],
    [50, 40, 0, 45, 0, "LATENT"],
    [60, 12, 0, 45, 1, "VAE"],
    [70, 45, 0, 46, 0, "IMAGE"],
    [85, 20, 0, 37, 0, "MODEL"]
  ],
  "groups": [],
  "config": {},
  "extra": {},
  "version": 0.4
}